<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MelodiJS - The Progressive JavaScript Framework</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap"
    rel="stylesheet">
  <style>
    :root {
      --vt-c-white: #ffffff;
      --vt-c-white-soft: #f8f8f8;
      --vt-c-white-mute: #f2f2f2;
      --vt-c-black: #181818;
      --vt-c-black-soft: #222222;
      --vt-c-black-mute: #282828;
      --vt-c-indigo: #2c3e50;
      --vt-c-divider-light-1: rgba(60, 60, 60, 0.29);
      --vt-c-divider-light-2: rgba(60, 60, 60, 0.12);
      --vt-c-divider-dark-1: rgba(84, 84, 84, 0.65);
      --vt-c-divider-dark-2: rgba(84, 84, 84, 0.48);
      --vt-c-text-light-1: #2c3e50;
      --vt-c-text-light-2: #476582;
      --vt-c-text-dark-1: rgba(255, 255, 255, 0.87);
      --vt-c-text-dark-2: rgba(235, 235, 235, 0.6);
      --brand-color: #2a3886;
      --brand-color-light: #2a3886;
      --brand-color-dark: #2a3886;
      --color-background: var(--vt-c-white);
      --color-background-soft: var(--vt-c-white-soft);
      --color-background-mute: var(--vt-c-white-mute);
      --color-border: var(--vt-c-divider-light-2);
      --color-border-hover: var(--vt-c-divider-light-1);
      --color-heading: var(--vt-c-text-light-1);
      --color-text: var(--vt-c-text-light-1);
      --color-text-light: var(--vt-c-text-light-2);
      --section-gap: 160px;
      --code-bg: #f8f8f8;
      --code-text: #2c3e50;
    }

    [data-theme="dark"] {
      --color-background: var(--vt-c-black);
      --color-background-soft: var(--vt-c-black-soft);
      --color-background-mute: var(--vt-c-black-mute);
      --color-border: var(--vt-c-divider-dark-2);
      --color-border-hover: var(--vt-c-divider-dark-1);
      --color-heading: var(--vt-c-text-dark-1);
      --color-text: var(--vt-c-text-dark-2);
      --color-text-light: var(--vt-c-text-dark-2);
      --code-bg: #1e1e1e;
      --code-text: #d4d4d4;
    }

    *,
    *::before,
    *::after {
      box-sizing: border-box;
      margin: 0;
      position: relative;
      font-weight: normal;
    }

    body {
      min-height: 100vh;
      color: var(--color-text);
      background: var(--color-background);
      transition: color 0.5s, background-color 0.5s;
      line-height: 1.6;
      font-family: 'Inter', sans-serif;
      font-size: 16px;
      text-rendering: optimizeLegibility;
      -webkit-font-smoothing: antialiased;
    }

    .app-layout {
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }

    header {
      position: fixed;
      top: 0;
      width: 100%;
      height: 60px;
      padding: 0 32px;
      background-color: var(--color-background);
      border-bottom: 1px solid var(--color-border);
      z-index: 100;
      display: flex;
      align-items: center;
      justify-content: space-between;
      transition: border-color 0.5s, background-color 0.5s;
    }

    .logo {
      font-weight: 600;
      font-size: 1.3rem;
      color: var(--color-heading);
      display: flex;
      align-items: center;
      gap: 10px;
      text-decoration: none;
    }

    .logo span {
      color: var(--brand-color);
    }

    .theme-toggle {
      background: none;
      border: 1px solid var(--color-border);
      color: var(--color-text);
      padding: 6px 12px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 0.9rem;
      transition: all 0.2s;
    }

    .theme-toggle:hover {
      border-color: var(--brand-color);
      color: var(--brand-color);
    }

    .sidebar {
      position: fixed;
      top: 60px;
      bottom: 0;
      left: 0;
      width: 280px;
      padding: 32px;
      overflow-y: auto;
      border-right: 1px solid var(--color-border);
      background-color: var(--color-background);
      transition: transform 0.3s, background-color 0.5s, border-color 0.5s;
      z-index: 10;
    }

    .sidebar-group {
      margin-bottom: 24px;
    }

    .sidebar-heading {
      font-weight: 700;
      color: var(--color-heading);
      margin-bottom: 8px;
      font-size: 1.1rem;
    }

    .sidebar-link {
      display: block;
      padding: 6px 0;
      color: var(--color-text-light);
      text-decoration: none;
      transition: color 0.2s;
      font-size: 0.95rem;
    }

    .sidebar-link:hover,
    .sidebar-link.active {
      color: var(--brand-color);
    }

    main {
      margin-top: 60px;
      margin-left: 280px;
      padding: 64px;
      max-width: 960px;
    }

    section {
      margin-bottom: 64px;
      scroll-margin-top: 80px;
    }

    h1 {
      font-size: 2.5rem;
      font-weight: 700;
      margin-bottom: 24px;
      line-height: 1.2;
      color: var(--color-heading);
    }

    h2 {
      font-size: 1.8rem;
      font-weight: 600;
      margin: 48px 0 16px;
      padding-bottom: 12px;
      border-bottom: 1px solid var(--color-border);
      color: var(--color-heading);
    }

    h3 {
      font-size: 1.4rem;
      font-weight: 600;
      margin: 32px 0 16px;
      color: var(--color-heading);
    }

    h4 {
      font-size: 1.1rem;
      font-weight: 600;
      margin: 24px 0 12px;
      color: var(--color-heading);
    }

    p {
      margin-bottom: 16px;
      line-height: 1.7;
    }

    ul {
      margin-bottom: 16px;
      padding-left: 24px;
    }

    li {
      margin-bottom: 8px;
    }

    a {
      color: var(--brand-color);
      text-decoration: none;
      font-weight: 500;
    }

    a:hover {
      text-decoration: underline;
    }

    pre {
      background-color: var(--code-bg);
      color: var(--code-text);
      padding: 20px 24px;
      border-radius: 8px;
      overflow-x: auto;
      margin: 24px 0;
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.9rem;
      border: 1px solid var(--color-border);
    }

    code {
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.85em;
      background-color: var(--color-background-mute);
      padding: 3px 6px;
      border-radius: 4px;
      color: var(--color-heading);
    }

    pre code {
      background-color: transparent;
      padding: 0;
      color: inherit;
      font-size: 1em;
    }

    .tip,
    .warning {
      padding: 20px 24px;
      border-radius: 8px;
      margin: 24px 0;
      border-left: 4px solid;
    }

    .tip {
      background-color: var(--color-background-soft);
      border-color: var(--brand-color);
    }

    .warning {
      background-color: rgba(234, 179, 8, 0.1);
      border-color: #eab308;
      color: var(--color-heading);
    }

    .warning strong {
      color: #eab308;
    }

    @media (max-width: 960px) {
      .sidebar {
        transform: translateX(-100%);
        box-shadow: 4px 0 10px rgba(0, 0, 0, 0.1);
      }

      .sidebar.open {
        transform: translateX(0);
      }

      main {
        margin-left: 0;
        padding: 32px 24px;
      }

      .menu-toggle {
        display: block;
      }
    }

    .menu-toggle {
      display: none;
      background: none;
      border: none;
      font-size: 1.5rem;
      color: var(--color-text);
      cursor: pointer;
      margin-right: 16px;
    }

    @media (min-width: 961px) {
      .menu-toggle {
        display: none;
      }
    }
  </style>
</head>

<body>
  <div class="app-layout">
    <header>
      <div style="display: flex; align-items: center;">
        <button class="menu-toggle" id="menuToggle">â˜°</button>
        <a href="#" class="logo">ðŸŽµ <span>MelodiJS</span></a>
      </div>
      <button class="theme-toggle" id="themeToggle">Appearance</button>
    </header>

    <aside class="sidebar" id="sidebar">
      <div class="sidebar-group">
        <div class="sidebar-heading">Getting Started</div>
        <a href="#introduction" class="sidebar-link">Introduction</a>
        <a href="#quick-start" class="sidebar-link">Quick Start</a>
        <a href="#creating-app" class="sidebar-link">Creating an Application</a>
      </div>
      <div class="sidebar-group">
        <div class="sidebar-heading">Essentials</div>
        <a href="#template-syntax" class="sidebar-link">Template Syntax</a>
        <a href="#template-options" class="sidebar-link">Template Options</a>
        <a href="#reactivity" class="sidebar-link">Reactivity</a>
        <a href="#computed" class="sidebar-link">Computed</a>
        <a href="#watchers" class="sidebar-link">Watchers</a>
        <a href="#class-style" class="sidebar-link">Class & Style</a>
        <a href="#conditional" class="sidebar-link">Conditional</a>
        <a href="#list" class="sidebar-link">List Rendering</a>
        <a href="#events" class="sidebar-link">Events</a>
        <a href="#forms" class="sidebar-link">Forms</a>
      </div>
      <div class="sidebar-group">
        <div class="sidebar-heading">Components</div>
        <a href="#components" class="sidebar-link">Basics</a>
        <a href="#props" class="sidebar-link">Props</a>
        <a href="#events-component" class="sidebar-link">Events</a>
        <a href="#slots" class="sidebar-link">Slots</a>
        <a href="#lifecycle" class="sidebar-link">Lifecycle</a>
      </div>
      <div class="sidebar-group">
        <div class="sidebar-heading">Advanced</div>
        <a href="#router" class="sidebar-link">Router</a>
        <a href="#transitions" class="sidebar-link">Transitions</a>
        <a href="#store" class="sidebar-link">State Management</a>
        <a href="#plugins" class="sidebar-link">Plugins</a>
      </div>
    </aside>

    <main>
      <section id="introduction">
        <h1>Introduction</h1>
        <p>MelodiJS is a progressive, ultra-lightweight JavaScript framework for building user interfaces. It combines
          the intuitive Options API of Vue.js with a fine-grained reactivity system inspired by SolidJS.</p>

        <div class="tip">
          <strong>Why MelodiJS?</strong>
          <ul>
            <li><strong>No Virtual DOM:</strong> Updates are surgical and target exact DOM nodes.</li>
            <li><strong>Tiny Footprint:</strong> ~3KB gzipped core.</li>
            <li><strong>Familiar API:</strong> If you know Vue, you know MelodiJS.</li>
            <li><strong>Reactive Arrays:</strong> Array mutations automatically trigger updates.</li>
            <li><strong>Built-in Router & Store:</strong> Everything you need out of the box.</li>
          </ul>
        </div>
      </section>

      <section id="quick-start">
        <h2>Quick Start</h2>
        <p>Get started with MelodiJS in seconds using a CDN or npm.</p>

        <h3>Via CDN</h3>
        <pre><code>&lt;script type="module"&gt;
  import { createApp } from 'https://unpkg.com/melodijs';

  createApp({
    data: () => ({ message: 'Hello Melodi!' })
  }).mount('#app')
&lt;/script&gt;</code></pre>

        <h3>Via NPM</h3>
        <pre><code>npm install melodijs</code></pre>
        <pre><code>import { createApp } from 'melodijs';

const app = createApp({
  data: () => ({ count: 0 }),
  methods: {
    increment() { this.count++ }
  }
});

app.mount('#app');</code></pre>
      </section>

      <section id="creating-app">
        <h2>Creating an Application</h2>
        <p>MelodiJS supports two ways to create applications:</p>

        <h3>Root Component API (Recommended)</h3>
        <p>Define your app as a single root component with data, methods, computed, watch, etc.</p>
        <pre><code>const app = createApp({
  data: () => ({
    message: 'Hello World',
    count: 0
  }),
  computed: {
    doubleCount() {
      return this.count * 2;
    }
  },
  methods: {
    increment() {
      this.count++;
    }
  }
});

app.mount('#app');</code></pre>

        <h3>Component Registration (Legac

          y)</h3>
        <p>Register components that will automatically mount to matching HTML elements.</p>
        <pre><code>createApp({
  components: {
    'my-component': {
      data: () => ({ message: 'Hello' }),
      template: '&lt;div&gt;{{ message }}&lt;/div&gt;'
    }
  }
}).mount('#app');</code></pre>
      </section>

      <section id="template-syntax">
        <h2>Template Syntax</h2>

        <h3>Text Interpolation</h3>
        <pre><code>&lt;span&gt;Message: {{ msg }}&lt;/span&gt;</code></pre>

        <h3>Attribute Binding</h3>
        <pre><code>&lt;div v-bind:id="dynamicId"&gt;&lt;/div&gt;
&lt;!-- Shorthand --&gt;
&lt;div :id="dynamicId"&gt;&lt;/div&gt;</code></pre>

        <h3>JavaScript Expressions</h3>
        <pre><code>{{ number + 1 }}
{{ ok ? 'YES' : 'NO' }}
{{ message.split('').reverse().join('') }}</code></pre>
      </section>

      <section id="template-options">
        <h2>Template Options</h2>
        <p>MelodiJS provides three ways to define component templates:</p>

        <h3>1. Inline String</h3>
        <pre><code>{
  template: '&lt;div&gt;{{ message }}&lt;/div&gt;'
}</code></pre>

        <h3>2. From Element (ID Selector)</h3>
        <pre><code>&lt;script type="text/template" id="my-template"&gt;
  &lt;div&gt;{{ message }}&lt;/div&gt;
&lt;/script&gt;

{
  template: { el: '#my-template' }
}</code></pre>

        <h3>3. From URL</h3>
        <pre><code>{
  template: { url: '/templates/my-component.html' }
}</code></pre>

        <div class="tip">
          <strong>Root Component Templates</strong><br>
          When using the root component API without a template property, MelodiJS uses the innerHTML of the mount target
          as the template.
        </div>
      </section>

      <section id="reactivity">
        <h2>Reactivity Fundamentals</h2>
        <p>Declare reactive state using the <code>data</code> function:</p>
        <pre><code>data: () => ({
  count: 0,
  message: 'Hello',
  items: [1, 2, 3]
})</code></pre>

        <h3>Array Reactivity</h3>
        <p>MelodiJS automatically tracks array mutations:</p>
        <pre><code>this.items.push(4);       // âœ… Reactive
this.items.pop();         // âœ… Reactive
this.items.splice(0, 1);  // âœ… Reactive
this.items[0] = 99;       // âœ… Reactive</code></pre>
      </section>

      <section id="computed">
        <h2>Computed Properties</h2>
        <p>Computed properties are cached and only re-evaluate when dependencies change:</p>
        <pre><code>computed: {
  fullName() {
    return `${this.firstName} ${this.lastName}`;
  },
  total() {
    return this.items.reduce((sum, item) => sum + item.price, 0);
  }
}</code></pre>
      </section>

      <section id="watchers">
        <h2>Watchers</h2>
        <p>React to data changes with watchers:</p>

        <h3>Simple Watcher</h3>
        <pre><code>watch: {
  username(newVal, oldVal) {
    console.log(`Username changed: ${oldVal} â†’ ${newVal}`);
  }
}</code></pre>

        <h3>Watcher with Options</h3>
        <pre><code>watch: {
  userId: {
    handler(newVal) {
      this.loadUserData(newVal);
    },
    immediate: true  // Run on mount
  }
}</code></pre>
      </section>

      <section id="class-style">
        <h2>Class & Style Bindings</h2>

        <h3>Dynamic Classes</h3>
        <pre><code>&lt;div :class="{ active: isActive, 'text-danger': hasError }"&gt;&lt;/div&gt;</code></pre>

        <h3>Dynamic Styles</h3>
        <pre><code>&lt;div :style="{ color: textColor, fontSize: fontSize + 'px' }"&gt;&lt;/div&gt;</code></pre>
      </section>

      <section id="conditional">
        <h2>Conditional Rendering</h2>

        <h3>v-if</h3>
        <pre><code>&lt;h1 v-if="awesome"&gt;MelodiJS is awesome!&lt;/h1&gt;</code></pre>

        <h3>v-show</h3>
        <pre><code>&lt;h1 v-show="ok"&gt;Hello!&lt;/h1&gt;</code></pre>
        <p>The difference: <code>v-show</code> toggles CSS <code>display</code>, <code>v-if</code> removes/adds
          elements.</p>
      </section>

      <section id="list">
        <h2>List Rendering</h2>
        <pre><code>&lt;ul&gt;
  &lt;li v-for="(item, index) in items" :key="item.id"&gt;
    {{ index }}: {{ item.name }}
  &lt;/li&gt;
&lt;/ul&gt;</code></pre>

        <div class="warning">
          <strong>Always use :key</strong><br>
          Providing a unique <code>:key</code> improves performance and prevents rendering bugs.
        </div>
      </section>

      <section id="events">
        <h2>Event Handling</h2>

        <h3>Inline Handlers</h3>
        <pre><code>&lt;button @click="count++"&gt;Increment&lt;/button&gt;</code></pre>

        <h3>Method Handlers</h3>
        <pre><code>&lt;button @click="handleClick"&gt;Click Me&lt;/button&gt;</code></pre>

        <h3>Event with Parameters</h3>
        <pre><code>&lt;button @click="say('Hello')"&gt;Say Hello&lt;/button&gt;</code></pre>
      </section>

      <section id="forms">
        <h2>Form Input Bindings</h2>
        <p>Use <code>v-model</code> for two-way data binding:</p>

        <h3>Text Input</h3>
        <pre><code>&lt;input v-model="message" /&gt;</code></pre>

        <h3>Checkbox</h3>
        <pre><code>&lt;input type="checkbox" v-model="checked" /&gt;</code></pre>

        <h3>Select</h3>
        <pre><code>&lt;select v-model="selected"&gt;
  &lt;option value="a"&gt;A&lt;/option&gt;
  &lt;option value="b"&gt;B&lt;/option&gt;
&lt;/select&gt;</code></pre>
      </section>

      <section id="components">
        <h2>Component Basics</h2>
        <pre><code>createApp({
  components: {
    'button-counter': {
      data: () => ({ count: 0 }),
      template: `
        &lt;button @click="count++"&gt;
          Clicked {{ count }} times
        &lt;/button&gt;`
    }
  }
}).mount('#app');</code></pre>
      </section>

      <section id="props">
        <h2>Props</h2>
        <pre><code>// Child component
{
  props: ['title', 'likes'],
  template: '&lt;h3&gt;{{ title }} ({{ likes }}))&lt;/h3&gt;'
}

// Parent usage
&lt;blog-post title="My Post" :likes="42"&gt;&lt;/blog-post&gt;</code></pre>
      </section>

      <section id="events-component">
        <h2>Component Events</h2>
        <pre><code>// Child emits event
methods: {
  submit() {
    this.$emit('submit', this.formData);
  }
}

// Parent listens
&lt;my-form @submit="handleSubmit"&gt;&lt;/my-form&gt;</code></pre>
      </section>

      <section id="slots">
        <h2>Slots</h2>
        <pre><code>// Component template
&lt;button class="btn"&gt;
  &lt;slot&gt;&lt;/slot&gt;
&lt;/button&gt;

// Usage
&lt;my-button&gt;Click Me&lt;/my-button&gt;</code></pre>
      </section>

      <section id="lifecycle">
        <h2>Lifecycle Hooks</h2>
        <ul>
          <li><code>beforeMount</code>: Before mounting begins</li>
          <li><code>mounted</code>: After component is mounted</li>
          <li><code>unmounted</code>: After component is unmounted</li>
        </ul>
        <pre><code>hooks: {
  mounted() {
    console.log('Component mounted!');
  }
}</code></pre>
      </section>

      <section id="router">
        <h2>Router</h2>
        <p>MelodiJS includes a built-in router for Single Page Applications:</p>

        <h3>Setup</h3>
        <pre><code>import { createApp } from 'melodijs';
import { MelodiRouter } from 'melodijs/router';

const router = new MelodiRouter({
  routes: [
    { path: '/', component: Home },
    { path: '/about', component: About }
  ]
});

const app = createApp({ /* ... */ });
app.use(router);
app.mount('#app');</code></pre>

        <h3>Navigation</h3>
        <pre><code>&lt;router-link to="/"&gt;Home&lt;/router-link&gt;
&lt;router-link to="/about"&gt;About&lt;/router-link&gt;

&lt;router-view&gt;&lt;/router-view&gt;</code></pre>

        <h3>Dynamic Route Matching</h3>
        <p>We often need to map routes with the same component to different URLs. In MelodiJS, we can use a dynamic
          segment in the path to achieve that.</p>
        <pre><code>const router = new MelodiRouter({
  routes: [
    // dynamic segments start with a colon
    { path: '/user/:id', component: User }
  ]
})</code></pre>
        <p>Now, URLs like <code>/user/foo</code> and <code>/user/bar</code> will both map to the same route.</p>
        <p>A dynamic segment is denoted by a colon <code>:</code>. When a route is matched, the value of the dynamic
          segments will be exposed as <code>this.$router.params()</code> in every component.</p>
        <pre><code>const User = {
  template: '&lt;div&gt;User {{ $router.params().id }}&lt;/div&gt;',
  hooks: {
    mounted() {
      console.log(this.$router.params().id)
    }
  }
}</code></pre>

        <h3>Programmatic Navigation</h3>
        <p>Aside from using <code>&lt;router-link&gt;</code> for declarative navigation, you can do this
          programmatically using the router instance.</p>
        <pre><code>// literal string path
this.$router.push('/home')

// with params
this.$router.push('/user/123')</code></pre>

        <h3>Nested Routes</h3>
        <p>Real applications often have multiple levels of nesting. MelodiJS router supports nested routes with the
          <code>children</code> option:</p>
        <pre><code>const router = new MelodiRouter({
  routes: [
    {
      path: '/user/:id',
      component: User,
      children: [
        { path: 'profile', component: UserProfile },
        { path: 'posts', component: UserPosts }
      ]
    }
  ]
})</code></pre>
        <p>The <code>User</code> component will need to include a <code>&lt;router-view&gt;</code> for the nested
          routes:</p>
        <pre><code>const User = {
  template: `
    &lt;div&gt;
      &lt;h2&gt;User {{ $router.params().id }}&lt;/h2&gt;
      &lt;router-view&gt;&lt;/router-view&gt;
    &lt;/div&gt;
  `
}</code></pre>

        <h3>Navigation Guards</h3>
        <p>Use navigation guards to control navigation flow, such as authentication checks:</p>
        <pre><code>router.beforeEach((to, from, next) => {
  // Check authentication
  if (to === '/admin' && !isAuthenticated()) {
    next('/login'); // Redirect to login
  } else {
    next(); // Proceed with navigation
  }
});</code></pre>

        <h3>Accessing Route Information</h3>
        <p>Components can access current route information:</p>
        <pre><code>// Current path
this.$router.currentRoute()  // => '/user/123'

// Route parameters
this.$router.params()  // => { id: '123' }

// Query parameters
this.$router.query()  // => { tab: 'profile' }</code></pre>
      </section>

      <section id="transitions">
        <h2>Transitions</h2>
        <p>Add CSS transitions to elements with <code>v-if</code>:</p>

        <h3>CSS Classes</h3>
        <pre><code>.fade-enter-from, .fade-leave-to {
  opacity: 0;
}

.fade-enter-active, .fade-leave-active {
  transition: opacity 0.5s;
}</code></pre>

        <h3>Usage</h3>
        <pre><code>&lt;transition name="fade"&gt;
  &lt;div v-if="show"&gt;Hello&lt;/div&gt;
&lt;/transition&gt;</code></pre>
      </section>

      <section id="store">
        <h2>State Management (MelodiStore)</h2>
        <p>Centralized state management with MelodiStore:</p>

        <h3>Setup</h3>
        <pre><code>import { MelodiStore } from 'melodijs/store';

const store = new MelodiStore({
  state: () => ({
    count: 0,
    user: null,
    items: []
  }),
  actions: {
    increment() {
      this.state.count++;
    },
    setUser(user) {
      this.state.user = user;
    },
    addItem(item) {
      this.state.items.push(item);
    }
  },
  getters: {
    double: (state) => state.count * 2,
    itemCount: (state) => state.items.length
  }
});

app.use(store);</code></pre>

        <h3>Using in Components</h3>
        <pre><code>// Access state
{{ $store.state.count }}

// Use getters
{{ $store.getters.double }}

// Dispatch actions
this.$store.dispatch('increment');</code></pre>

        <h3>Actions with Parameters</h3>
        <p>Actions can accept parameters and access other actions via <code>this.dispatch</code>:</p>
        <pre><code>actions: {
  incrementBy(amount) {
    this.state.count += amount;
  },
  async fetchUser(userId) {
    const response = await fetch(`/api/users/${userId}`);
    const user = await response.json();
    this.dispatch('setUser', user);
  }
}</code></pre>

        <h3>Deep Reactivity</h3>
        <p>MelodiStore supports deep reactivity for nested objects and arrays:</p>
        <pre><code>const store = new MelodiStore({
  state: () => ({
    user: {
      profile: {
        name: 'John',
        age: 30
      }
    },
    todos: [
      { id: 1, text: 'Learn MelodiJS', done: false }
    ]
  }),
  actions: {
    updateUserName(name) {
      // Deep reactivity - UI updates automatically
      this.state.user.profile.name = name;
    },
    toggleTodo(id) {
      const todo = this.state.todos.find(t => t.id === id);
      if (todo) todo.done = !todo.done;
    }
  }
});</code></pre>

        <div class="tip">
          <strong>Array Mutations</strong><br>
          All array mutations (<code>push</code>, <code>pop</code>, <code>splice</code>, etc.) are tracked automatically
          and trigger reactive updates.
        </div>
      </section>

      <section id="plugins">
        <h2>Plugin System</h2>
        <p>Extend MelodiJS with plugins:</p>

        <h3>Using Plugins</h3>
        <pre><code>import { createApp } from 'melodijs';
import { MelodiRouter } from 'melodijs/router';

const app = createApp({ /* ... */ });
app.use(myPlugin, { /* options */ });
app.mount('#app');</code></pre>

        <h3>Creating Plugins</h3>
        <pre><code>const myPlugin = {
  install(app, options) {
    // Add global components
    app.components['my-component'] = { /* ... */ };
    
    // Add to app instance
    app.myProperty = 'value';
  }
};</code></pre>
      </section>
    </main>
  </div>

  <script>
    // Theme toggle
    const themeToggle = document.getElementById('themeToggle');
    const html = document.documentElement;
    const savedTheme = localStorage.getItem('theme');
    const systemDark = window.matchMedia('(prefers-color-scheme: dark)').matches;

    if (savedTheme) {
      html.setAttribute('data-theme', savedTheme);
    } else if (systemDark) {
      html.setAttribute('data-theme', 'dark');
    }

    themeToggle.addEventListener('click', () => {
      const current = html.getAttribute('data-theme');
      const next = current === 'dark' ? 'light' : 'dark';
      html.setAttribute('data-theme', next);
      localStorage.setItem('theme', next);
    });

    // Mobile menu
    const menuToggle = document.getElementById('menuToggle');
    const sidebar = document.getElementById('sidebar');

    menuToggle.addEventListener('click', () => {
      sidebar.classList.toggle('open');
    });

    document.querySelectorAll('.sidebar-link').forEach(link => {
      link.addEventListener('click', () => {
        if (window.innerWidth <= 960) {
          sidebar.classList.remove('open');
        }
      });
    });

    // Active link highlighting
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          const id = entry.target.getAttribute('id');
          document.querySelectorAll('.sidebar-link').forEach(link => {
            link.classList.remove('active');
            if (link.getAttribute('href') === '#' + id) {
              link.classList.add('active');
            }
          });
        }
      });
    }, { threshold: 0.5 });

    document.querySelectorAll('section').forEach(section => {
      observer.observe(section);
    });
  </script>
</body>

</html>